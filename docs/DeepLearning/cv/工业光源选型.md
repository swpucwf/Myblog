光源的选择

- 光源的合理性选择，直接影响了输入图像数据的质量与应用效果。针对每个不同的应用案例与环境，需要选择相应的光源与合理的照明方式，以求达到最好的应用效果。
- 机器视觉系统主要由三部分组成：图像的获取、图像的处理和分析、输出或显示。而图像的获取是机器视觉的核心，图像的获取系统则是由光源、镜头、相机三部分组成。光源的选取与打光合理与否可直接影响至少30%的成像质量。所以光源是机器视觉系统中非常重要的一部分。
- 通过适当的光源照明设计，使图像中的目标信息与背景信息得到最佳分离，可以大大降低图像处理算法分割、识别的难度，同时提高系统的定位、测量精度，使系统的可靠性和综合性能得到提高。反之，如果光源设计不当，会导致在图像处理算法设计和成像系统设计中事倍功半。因此，光源及光学系统设计的成败是决定系统成败的首要因素。
  - 照亮目标，提高目标亮度；
  - 突出测量特征，简化图像处理算法；
  - 克服环境光的干扰，保证图像的稳定性，提高图像信噪比；
  - 提高视觉系统的定位、测量、识别精度，以及系统的运行速度；
  - 降低系统设计的复杂度，形成最有利于图像处理的成像效果；

#### 光源种类

- 光源种类

  - 可见光

    **LED 灯：**

    - 使用寿命约10000－30000小时。
    - 可以使用多个LED达到高亮度，同时可组合不同的形状；
    - 响应速度快，波长可以根据用途选择，制成不同的颜色。
    - 可制成各种形状、尺寸及各种照射角度；
    - 可根据需要制成各种颜色，并可以随时调节亮度；
    - 通过散热装置，散热效果更好，光亮度更稳定；
    - 使用寿命长（约3万小时，间断使用寿命更长）；
    - 反应快捷，可在10us或更短的时间内达到最大亮度；
    - 电源带有外触发，可以通过计算机控制，起动速度快，可以用作频闪灯；
    - 运行成本低、寿命长的LED，会在综合成本和性能方面体现出更大的优势；
    - 可根据客户的需要，进行特殊设计。
    - 寿命。光源的半衰期要长，且在半衰期内，光谱稳定，亮度衰减小。
      发热特性。光源的工作温度要低，避免高温损坏被检测物。
      信噪比高，抗干扰能力强。
      闪烁频率，交流、直流。
      外形尺寸，便于安装。

    **萤光灯：**

    - 使用寿命大约1500－3000小时；
    - 优点：扩散性好、适合大面积均匀照射；
    - 缺点：响应速度慢，亮度较暗。

    **光纤卤素灯：**

    - 使用寿命大约1000小时；
    - 优点：亮度高；
    - 缺点：响应速度慢，几乎没有光亮度和色温的变化。

  - 不可见光

#### 照射方式

- 一般目的的照明
  
- 通用照明一般采用环状或点状照明。环灯是一种常用的通用照明方式，其很容易安装在镜头上，可给漫反射表面提供足够的照明。
  
- 背向照明

  - 被测物**放在光源和摄像机之间**，它的优点是能获得高对比度的图像，图像效果为黑白分明的被测物轮廓，常用于**尺寸测量**；

  - 背光照明是将光源放置在相对于摄像头的物体的背面。这种照明方式与别的照明方式有很大不同因为图像分析的不是发水光而是入射光。背光照明产生了很强的对比度。

  - 应用背光技术时候，物体表面特征可能会丢失。例如，可以应用背光技术测量硬币的直径，但是却无法判断硬币的正反面。

    ![图片](images/%E5%B7%A5%E4%B8%9A%E5%85%89%E6%BA%90%E9%80%89%E5%9E%8B/640)

- 前向照明

  - **光源和摄像机位于被测物的同侧**，这种方式便于安装，主要用于**检测物体表面的重要细节特征、缺陷和划痕。**

- 结构光

  - 将**光栅或线光源**等投射到被测物上，根据它们产生的畸变，解调出被测物的三维信息。
  - 结构光是一种投影在物体表面的有一定几何形状的光（如线形、圆形、正方形）。典型的结构光涉及激光或光纤。
  - 结构光可以用来测量相机到光源的距离。

- 同轴照明

  - 同轴照明是与摄像头的轴向有相同的方向的光照射到物体的表面。

  - 同轴照明使用一种特殊的半反射镜面反射光源到摄像头的透镜轴方向。半反射镜面只让从物体表面反射垂直于透镜的光源通过

  - 同轴照明技术对于实现扁平物体且有镜面特征的表面的均匀照明很有用。

  - 此外此技术还可以实现使表面角度变化部分高亮，因为不垂直于摄像头镜头的表面反射的光不会进入镜头，从而造成表面较暗。


- 连续漫反射照明

  - 连续漫反射照明应用于物体表面的反射性或者表面有复杂的角度。连续漫反射照明应用半球形的均匀照明，以减小影子及镜面反射。

  - 这种照明方式对于完全组装的电路板照明非常有用。这种光源可以达到170立体角范围的均匀照明。

    ![图片](images/%E5%B7%A5%E4%B8%9A%E5%85%89%E6%BA%90%E9%80%89%E5%9E%8B/640)

- 亮/暗域照明

  - 相对于物体表面提供低角度照明。使用相机拍摄镜子使其在其视野内，如果在视野内能看见光源就认为使亮域照明，相反的在视野中看不到光源就是暗域照明。

  - 光源是亮域照明还是暗域照明与光源的位置有关。典型的，暗域照明应用于对表面部分有突起的部分的照明或表面纹理变化的照明。

  - 暗场照明

    ![图片](images/%E5%B7%A5%E4%B8%9A%E5%85%89%E6%BA%90%E9%80%89%E5%9E%8B/640)

    

- 频闪光照明

  - 将**高频率的光脉冲**照射到物体上，**摄像机拍摄要求与光源同步**。

- 多轴照明

  - 在许多应用中，为了使视野下不同的特征表现不同的对比度，需要多重照明技术。

  

#### 光源种类（照明方式）

- 直接照明光源（沐光，低角度，条形，聚光）
- 简介照明光源（低角度，扁平环状，圆顶）
- 透射照明光源（背光，线形）
- 同轴照明光源（同轴）
- 特殊照明光源（平行光，点光源，定制）

#### 打光方式

- 穹形光源
  - 主要用于球型或曲面物体的缺陷检测、不平坦的光滑表面字符的检测、金属或镜面的表面检测。如玻璃瓶、滚珠、小工件表面、塑料或铝制容器等。

- 环形光源
  - 环形光源提供不同照射角度、不同颜色组合，更能突出物体的三维信息；高密度LED阵列，高亮度；多种紧凑设计，节省安装空间；解决对角照射阴影问题；可选配漫射板导光，光线均匀扩散。
  - 应用领域:PCB基板检测，IC元件检测，显微镜照明，液晶校正，塑胶容器检测，集成电路印字检查
  - 多用于集成电路料带与管脚字符、金属工件刻印字符、光滑表面划痕、瓶口尺寸或裂痕、平面工件表面质量检测。

- 平行光源
  - 侧面打光的照明光源，可以避免正面照射产生的强烈反光，同时还可以对边缘部分实现高亮的照明，是一种在尺寸测量、外观检测方面应用非常广泛的一种照明方式。常用于LCD缺陷的检测、包装文字检测、包装膜破损检测、纸张质量检测、常规印刷质量检测、制造物裂纹的检测、电子部件的形状识别和大小的测量、各种线阵检测等。

- 同轴光源
  - 图像效果为明亮背景上的黑色特征，用于反光厉害的平面物体检测，能够加强有差异角度的表面特征，增强表面纹理（划痕、凹陷、压印），减少阴影。如金属、玻璃等光洁表面的划痕和瑕疵检测，芯片和硅片的破损检测、金属件上的冲压字符检测、线路板焊点与符号、集成电路的管脚字符检测等。
  - 同轴光源可以消除物体表面不平整引起的阴影，从而减少干扰；部分采用分光镜设计，减少光损失，提高成像清晰度，均匀照射物体表面。
  - 应用领域:系列光源最适宜用于反射度极高的物体，如金属、玻璃、胶片、晶片等表面的划伤检测，芯片和硅晶片的破损检测，Mark点定位，包装条码识别。

- 点光源
  - 大功率LED，体积小，发光强度高；光纤卤素灯的替代品，尤其适合作为镜头的同轴光源等；
  - 高效散热装置，大大提高光源的使用寿命。应用领域:适合远心镜头使用，用于芯片检测，Mark点定位，晶片及液晶玻璃底基校正。
- AOI专用光源
  - 不同角度的三色光照明，照射凸显焊锡三维信息；外加漫射板导光，减少反光；不同角度组合；应用领域:用于电路板焊锡检测。
- 背光源
  - 用高密度LED阵列面提供高强度背光照明，能突出物体的外形轮廓特征，尤其适合作为显微镜的载物台。
  - 红白两用背光源、红蓝多用背光源，能调配出不同颜色，满足不同被测物多色要求。应用领域:机械零件尺寸的测量，电子元件、IC的外型检测，胶片污点检测，透明物体划痕检测等。

- 低角度光源
  - 高角度照射，图像整体较亮，适合表面不反光物体；
  - 低角度照射，图像背景为黑，特征为白，可以突出被测物轮廓及表面凹凸变化；
  - 多角度照射，图像整体效果较柔和，适合曲面物体检测；
- 条形光源
  - 条形光源是较大方形结构被测物的首选光源；颜色可根据需求搭配，自由组合；照射角度与安装随意可调。
  - 应用领域:金属表面检查，图像扫描，表面裂缝检测，LCD面板检测等。

- 线性光源
  - 超高亮度，采用柱面透镜聚光，适用于各种流水线连续检测场合。
  - 应用领域:阵相机照明专用，AOI专用。
- 球积分光源
  - 具有积分效果的半球面内壁，均匀反射从底部360度发射出的光线，使整个图像的照度十分均匀。
  - 应用领域:合于曲面，表面凹凸，弧形表面检测，或金属、玻璃表面反光较强的物体表面检测。

- 光栅
- 对位光源
  - 对位速度快；视场大；精度高；体积小，便于检测集成；亮度高，可选配辅助环形光源。
  - 应用领域:VA系列光源是全自动电路板印刷机对位的专用光源。
- 组合条形光源
  - 四边配置条形光，每边照明独立可控；可根据被测物要求调整所需照明角度，适用性广。
  - 应用案例:CB基板检测，IC元件检测，焊锡检查，Mark点定位，显微镜照明，包装条码照明，球形物体照明等。

##### 镜头功能

光学成像。镜头是机器视觉系统中的重要组件，对成像质量有着关键性的作用。分辨率、对比度、景深及各种像差。选择依据:相机接口/物距/拍摄范围/CCD尺寸/畸变的允许范围/放大率/焦距/光圈等。

**（a）考虑光源颜色和背景颜色：**

- 使用与被测物同色系的光会使图像变亮（如：红光使红色物体更亮）；
- 使用与被测物相反色系的光会使图像变暗（如：红光使蓝色物体更暗、用蓝光照射黄色物体，呈现黑色）。
- 波长越长，穿透能力越强；波长越短，扩散能力越强。红外的穿透能力强，适合检测透光性差的物体，如棕色口服液杂质检测。紫外对表面的细微特征敏感，适合检测对比不够明显的地方，如食用油瓶上的文字检测。

**（b）选择光源的形状和尺寸：**

- 主要分为圆形、方形和条形。通常情况下选用与被测物体形状相同的光源，最终光源形状以测试效果为准。光源的尺寸选择，要求保障整个视野内光线均匀，略大于视野比较好。

**（c）选择是否用漫射光源：**

- 如被测物体表面反光，最好选用漫反射光源。多角度的漫射照明使得被测物表面整体亮度均匀，图像背景柔和，检测特征不受背景干扰。

**（d）如何评价一个光源的好坏？**

- 对比度。对比度对机器视觉来说非常重要。机器视觉应用的照明的最重要的任务就是使需要被观察的特征与需要被忽略的图像特征之间产生最大的对比度，从而易于特征的区分。对比度定义为在特征与其周围的区域之间有足够的灰度量区别。好的照明应该能够保证需要检测的特征突出于其他背景。
- 鲁棒性。鲁棒性就是对环境有一个好的适应。好的光源需要在实际工作中与其在实验室中的有相同的效果 。
- 亮度。当选择两种光源的时候，最佳的选择是选择更亮的那个。光源的亮度不够，必然要加大光圈，从而减小了景深 。
- 均匀性。均匀性是光源一个很中要的技术参数。均匀性好的光源使系统工作稳定 。
- 可维护性。可维护性主要指光源易于安装，易于更换 。
- 寿命及发热量。光源的亮度不易衰减过快，这样会影响系统的稳定，增加维护的成本 。发热量大的灯亮度衰减快，光源的寿命也会受到很大影响。

**(e)如何依靠光源增强图像对比度？**

- 使用相同颜色的光或相近颜色的光源照射可以使被照射部分变亮；
- 使用相反颜色的光或相近颜色的光源照射可以使被照射部分变暗。
- 不同的波长，对物质的穿透力(穿透率)不同，波长越长，对物体的穿透力愈强，波长越短，对物质表面的扩散率愈大。

##### 机器视觉照明

**1、检测材料缺损请使用亮度高的光；**

**2、精确定位请使用合适波长的光；**

**3、检测玻璃上的刮痕请使用非漫射的光；**

**4、检测透明包装请使用漫射光；**

**5、创造对比请使用颜色光；**

**6、检测快速移动物体请使用频闪光；**

**7、消除反射时请使用红外光；**

**8、消除颜色变化请使用红外光。**

机器视觉系统在工作过程中，依赖于图像质量，高质量的图像可以使系统能够更加精准地从检测物体中提取信息，而在视觉应用中的图像质量很大程度上取决于照明条件：**颜色、角度以及光源数量。**

照明又取决于检测物体的尺寸、表面的特征、部分几何特征以及系统需求。

[机器视觉教师总结的光源与打光经验](https://mp.weixin.qq.com/s?__biz=MzU5NDM1MjU5Mg==&mid=2247490328&idx=2&sn=97d4b71d20d543360fcc48b64813b58b&chksm=fe03dba7c97452b188918d11a656cc7141b9997c150027367f4640e88ef39336fb9c51f5b10a&scene=178&cur_album_id=2211884419290857475#rd)
[光源技巧](https://mp.weixin.qq.com/s?__biz=MzU5NDM1MjU5Mg==&mid=2247490992&idx=2&sn=a6799cff345b5680e7bb1a2ebb6f1b8a&chksm=fe03dd0fc974541990e7b7fb990b9f747883e20359baeee6b1401d0abb34ad3a9d074f11f2dc&scene=178&cur_album_id=2211884419290857475#rd)

